{% extends "base.html" %}

{% block title %}Blog - {{ site.title }}{% endblock %}

{% block content %}
<section class="blog-index">
    <div class="blog-links" style="margin-bottom:2rem;">
        <a href="/blog/tags/">Browse by Tag</a> |
        <a href="/blog/categories/">Browse by Category</a>
    </div>

    <div class="post-list">
        {% for post in posts %}
        <article class="post-preview">
            <header>
                <h2>
                    <a href="{{ post.metadata.url }}">{{ post.metadata.title }}</a>
                </h2>
                <div class="post-meta-line">
                    {% if post.metadata.date %}
                    <span class="post-date">
                        {{ post.metadata.date.strftime('%B %d, %Y') }}
                    </span>
                    {% endif %}
                    {% if post.metadata.tags %}
                    <div class="tags">
                        Tags:
                        {% for tag in post.metadata.tags %}
                        <a href="/blog/tags/{{ tag }}/">{{ tag }}</a>
                        {% endfor %}
                    </div>
                    {% endif %}
                    {% if post.metadata.categories %}
                    <div class="categories">
                        Categories:
                        {% for cat in post.metadata.categories %}
                        <a href="/blog/categories/{{ cat }}/">{{ cat }}</a>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
            </header>

            {% if post.metadata.description %}
            <div class="description">
                {{ post.metadata.description }}
            </div>
            {% endif %}
        </article>
        {% endfor %}
    </div>

    {% if total_pages > 1 %}
    <div class="pagination" style="margin-top:2rem;">
        {% for p in range(1, total_pages + 1) %}
            {% if p == page %}
                <span style="font-weight:bold;">{{ p }}</span>
            {% else %}
                {% if p == 1 %}
                    <a href="/blog/">{{ p }}</a>
                {% else %}
                    <a href="{{ pagination_base }}{{ p }}.html">{{ p }}</a>
                {% endif %}
            {% endif %}
        {% endfor %}
    </div>
    {% endif %}
</section>
{% endblock %}
